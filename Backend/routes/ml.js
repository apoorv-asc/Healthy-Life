const express = require("express");
const app = express();
const router = express.Router();
const axios = require('axios');

const NodeCache = require('node-cache')
const myCache = new NodeCache()

// @route   GET logout/
// @desc    Logs out the current user
// @access  Public
router.get("/cost_pred", function (req, res) {

encounters = ["ambulatory", "emergency", "outpatient", "inpatient", "wellness"];
hospitals = ["CAMBRIDGE HEALTH ALLIANCE","HOLYOKE MEDICAL CENTER","LOWELL GENERAL HOSPITAL","BRIGHAM AND WOMEN'S HOSPITAL","ST ELIZABETH'S MEDICAL CENTER","MOUNT AUBURN HOSPITAL","BETH ISRAEL DEACONESS HOSPITAL - PLYMOUTH","BAYSTATE MEDICAL CENTER","SHRINERS' HOSPITAL FOR CHILDREN (THE)","SAINT ANNE'S HOSPITAL","SOUTHCOAST HOSPITAL GROUP  INC","NORWOOD HOSPITAL","NEWTON-WELLESLEY HOSPITAL","SOUTH SHORE HOSPITAL","BETH ISRAEL DEACONESS HOSPITAL-MILTON INC","NEW ENGLAND BAPTIST HOSPITAL","CARNEY HOSPITAL","LAHEY HOSPITAL & MEDICAL CENTER  BURLINGTON","SIGNATURE HEALTHCARE BROCKTON HOSPITAL","METROWEST MEDICAL CENTER","HALLMARK HEALTH SYSTEM","NORTH SHORE MEDICAL CENTER -","HALLMARK HEALTH MEDICAL ASSOCIATES INC","BROCKTON AREA MULTI-SERVICES  INC.","GOOD SAMARITAN MEDICAL CENTER","MILFORD REGIONAL MEDICAL CENTER","HEALTHALLIANCE HOSPITALS  INC","BAYSTATE FRANKLIN MEDICAL CENTER","MASSACHUSETTS GENERAL HOSPITAL","WINCHESTER HOSPITAL","ANNA JAQUES HOSPITAL","BETH ISRAEL DEACONESS HOSPITAL - NEEDHAM","COOLEY DICKINSON HOSPITAL INC THE","BOSTON CHILDREN'S HOSPITAL","BOSTON MEDICAL CENTER CORPORATION-","MORTON HOSPITAL","MARLBOROUGH HOSPITAL","MERCY MEDICAL CTR","CAPE COD HOSPITAL","BEVERLY HOSPITAL CORPORATION","NOBLE HOSPITAL","PCP89345","PCP128586","HARRINGTON MEMORIAL HOSPITAL-1","Plymouth Outreach Clinic","AT CARE PLLC","Edith Nourse Rogers Memorial Veterans Hospital (Bedford VA)","HEYWOOD HOSPITAL -","UMASS MEMORIAL MEDICAL CENTER INC","ST VINCENT HOSPITAL","ADCARE HOSPITAL OF WORCESTER INC","PCP205980","STURDY MEMORIAL HOSPITAL","NANTUCKET COTTAGE HOSPITAL","MASSACHUSETTS EYE AND EAR INFIRMARY -","BRIGHAM AND WOMEN'S FAULKNER HOSPITAL","LAWRENCE GENERAL HOSPITAL","BETH ISRAEL DEACONESS MEDICAL CENTER","TUFTS MEDICAL CENTER","EMERSON HOSPITAL -","Hyannis Outpatient Clinic","COUNSELING ASSOCIATES OF DRACUT AND METHUEN","CLINTON HOSPITAL ASSOCIATION","Quincy Outpatient Clinic","ORTHOPEDIC AND SPORTS PHYSICAL THERAPY  LLP","FRANCISCAN CHILDREN'S HOSPITAL & REHAB CENTER","FALMOUTH HOSPITAL","PCP26110","HOLY FAMILY HOSPITAL","UHS OF WESTWOOD PEMBROKE INC","BERKSHIRE MEDICAL CENTER INC - 1","Framingham Outpatient Clinic","REHAB RESOLUTIONS INC","NEW ENGLAND ORAL SURGERY ASSOCIATES LLC","BAYSTATE WING HOSPITAL AND MEDICAL CENTERS","PCP44465","PCP136067","SOUTH BAY MENTAL HEALTH CENTER  INC.","PCP10127","VA Boston Healthcare System  Jamaica Plain Campus","Worcester Outpatient Clinic","PCP166697","CAREWELL URGENT CARE CENTERS OF MA  PC","Worcester Vet Center","FAIRVIEW HOSPITAL","Gloucester Community Based Outpatient Clinic (CBOC)","Lowell Outpatient Clinic","PCP191696","PCP67787","PCP139219","Boston Vet Center","Haverhill Community Based Outpatient Clinic (CBOC)","NASHOBA VALLEY MEDICAL CENTER","SHRINERS' HOSPITAL FOR CHILDREN - BOSTON  THE","RIVERSIDE RADIOLOGY MEDICAL GROUP INC","ADAMS PHYSICAL THERAPY  LLC","DENTAL SURGEONS OF FALL RIVER PC","Fitchburg Outpatient Clinic","PCP4453","PCP9047","New Bedford Outpatient Clinic","Springfield Vet Center","MARTHA'S VINEYARD HOSPITAL INC","PCP13802","New Bedford Vet Center","ATHOL MEMORIAL HOSPITAL","PCP52699","PCP77608","VA Boston Healthcare System  Brockton Campus","PCP3184","PCP26077","PCP118611","CAMBRIDGE PUBLIC HEALTH COMMISSION","HAMPDEN PODIATRY ASSOCIATES","SOUTH SHORE RADIOLOGICAL ASSOCIATES  INC.","HEBREW REHABILITATION CENTER","MILTON CHIROPRACTIC AND REHABILITATION INC","MERRIMACK VALLEY PHYSICAL THERAPY"];
description = ["Respiratory therapy","Wound care","Fracture care","Asthma self management","Physical therapy procedure","Routine antenatal care","Urinary tract infection care","Demential management","Diabetes self management plan","Head injury rehabilitation","Lifestyle education regarding hypertension","Cancer care plan","Chronic obstructive pulmonary disease clinical management plan","Psychiatry care plan","Care Plan","Hyperlipidemia clinical management plan"];
reason = ["Acute bronchitis (disorder)","Facial laceration","Fracture of ankle","Laceration of foot","Childhood asthma","Laceration of forearm","Tear of meniscus of knee","Fracture of forearm","Laceration of thigh","Injury of medial collateral ligament of knee","Normal pregnancy","Injury of anterior cruciate ligament","Fracture subluxation of wrist","Laceration of hand","Fracture of clavicle","Fracture of rib","Closed fracture of hip","Escherichia coli urinary tract infection","Alzheimer\'s disease (disorder)","Prediabetes","Bullet wound","Cystitis","Rupture of patellar tendon","Sprain of ankle","Concussion with no loss of consciousness","Hypertension","Familial Alzheimer\'s disease of early onset (disorder)","Malignant tumor of colon","Pulmonary emphysema (disorder)","Major depression disorder","Chronic obstructive bronchitis (disorder)","Neoplasm of prostate","Diabetes","Hyperlipidemia"];
diagnosis = ["Measurement of respiratory function (procedure)","Suture open wound","Bone immobilization","Ankle X-ray","Plain chest X-ray (procedure)","Asthma screening","Sputum examination (procedure)","Knee X-ray","Upper arm X-ray","Injection of tetanus antitoxin","Urine culture","Urine protein test","Skin test for tuberculosis","Physical examination of mother","Measurement of Varicella-zoster virus antibody","Gonorrhea infection test","Chlamydia antigen test","Human immunodeficiency virus antigen test","Rubella screening","Hepatitis B Surface Antigen Measurement","Hemoglobin / Hematocrit / Platelet count","Blood typing  RH typing","Evaluation of uterine fundal height","Ultrasound scan for fetal viability","Syphilis infection test","Auscultation of the fetal heart","Standard pregnancy test","Hepatitis C antibody test","Urine screening test for diabetes","Cytopathology procedure  preparation of smear  genital source","Bone density scan (procedure)","X-ray or wrist","Medication Reconciliation (procedure)","Admission to orthopedic department","Clavicle X-ray","Chest X-ray","Pelvis X-ray","Alpha-fetoprotein test","Fetal anatomy study","Electrical cardioversion","Spirometry (procedure)","Augmentation of labor","Childbirth","Admission to trauma surgery department","High resolution computed tomography of chest without contrast (procedure)","Hearing examination (procedure)","Combined chemotherapy and radiation therapy (procedure)","Intramuscular injection","Extraction of wisdom tooth","positive screening for PHQ-9","Prostatectomy","Digital examination of rectum","Pulmonary rehabilitation (regime/therapy)"];
    res.render("cost_pred",{encounters,hospitals,description,reason,diagnosis,"username":myCache.get('username')});
});

router.post("/cost_pred",async (req,res)=>{
    try{
        const {enc,hosp,desc,rsn,days,diag} = req.body;
        const result = await axios("http://localhost:8000/cost_pred/",{
            method:"POST",
            data:{
                enc:enc,
                hosp:hosp,
                desc:desc,
                rsn:rsn,
                diag:diag,
                days:days
            },
            headers: {
                'Content-Type': 'application/json',
            }
        })
        console.log(result.data);
        const pred = result.data.res;
        console.log(pred)
        res.send("<h1>pred</h1>");
    }catch(err){
        res.send(err);
    }
    
})

router.get('/diseases_pred',(req,res)=>{
    let sym = ["Abdomen, Acute","Abdominal Pain","Abdominal bloating","Abdominal colic","Abducens Nerve Diseases","Abnormal bowel sounds","Abnormal breathing","Abnormal heart beat","Abnormal sputum","Abortion, Habitual","Acidosis","Acidosis, Respiratory","Acquired kyphosis","Acrocyanosis","Acrodermatitis enteropathica","Action Tremor","Acute dyspnea","Acute rotatory vertigo","Adynamia","Affective ambivalence","Agitation","Agranulocytosis","Airway Obstruction","Akathisia","Albuminuria","Alkalosis, Respiratory","Alopecia","Alopecia effluvium","Alveolitis","Amaurosis","Amaurosis Fugax","Amblyopia","Amenorrhea","Amnesia","Amyloidosis","Anal Fissure","Anal abscess","Anemia","Anemia due to blood loss","Anemia, Hemolytic","Anemia, Megaloblastic","Angina Pectoris","Angor mortis","Anisocytosis","Annular Erythema","Anorexia","Anterior uveitis","Anti-transglutaminase antibody","Anuria","Anxiety","Aortic Aneurysm","Apathy","Aphasia","Aphthous Stomatitis","Arachnodactyly","Arthralgia","Arthritis","Arthritis, Reactive","Ascites","Asterixis","Ataxia","Atrial Fibrillation","Atrophic condition of skin","Atrophie blanche","Atrophy of testis","Aura","Auscultation","Autistic Disorder","Autoimmune hemolytic anemia","Automatism","Back Pain","Baresthesia","Bartholinitis","Basophilia","Beading of ribs","Bell Palsy","Benign Prostatic Hyperplasia","Bicytopenia","Bigeminal pulse","Biopsy of liver (procedure)","Blast Phase","Blindness","Blood in stool","Bone marrow hyperplasia","Bone pain","Botulism","Bradycardia","Bronchial Spasm","Bronchiectasis","Bronchitis","Bronchopneumonia","Bronchopulmonary infection","Brown urine","Bulbar palsy","Bulimia","Bulla","Burning sensation","Bursitis","Ca++ increased","Cachexia","Calcinosis cutis","Cancer cachexia","Candidiasis","Capsulorhexis","Carcinoma of Endocrine Gland","Cardiac Arrhythmia","Cardiac Tamponade","Cardiac asthma","Cardiomegaly","Casts urinary red cells positive","Catatonia","Cellular Vesicle","Cellulitis","Cerebellar Ataxia","Cerebral Edema","Cerebral hypoperfusion","Cerebrovascular accident","Cheilitis","Chest Pain","Chills","Cholecystolithiasis","Cholelithiasis","Cholestasis","Chronic cough","Chronic diarrhea","Chronic fatigue","Chronic passive congestion of liver","Chronic skin ulcer","Chronic urticaria","Cirrhosis","Clubbed Fingers","Clubbing","Colorectal Carcinoma","Comatose","Common Cold","Conduction disorder of the heart","Conductive hearing loss","Confusion","Congenital clinodactyly","Congenital flat foot","Congenital hypothyroidism without goiter","Congenital macroglossia","Congenital pectus carinatum","Congenital pectus excavatum","Conjunctivitis","Constipation","Contact Dermatitis","Continuous leakage of urine","Cor pulmonale","Cornea verticillata","Corneal Ulcer","Coronary artery embolism","Coughing","Craniotabes","Creatine kinase measurement","Creatinine increased","Cushingoid facies","Cyanosis","Cystitis","Cytopenia","Dactylitis","Decrease in appetite","Deglutition Disorders","Dehydration","Delusion of observation","Delusion of reference","Delusions","Dental caries","Depersonalization","Derealization","Dermatitis Herpetiformis","Dermatitis, Atopic","Dermatomyositis","Developmental delay (disorder)","Diarrhea","Digestive System Fistula","Dilatation of aorta","Dilation of esophagus due to disease","Diplopia","Disease of capillaries","Disorder of eye","Disorder of skeletal system","Disorientation","Disseminated Intravascular Coagulation","Distention","Disturbances in consciousness NEC","Diuretics","Dizziness","Dizzy spells","Drowsiness","Dry cough","Dry skin","Dupuytren Contracture","Dysarthria","Dysdiadochokinesis","Dyskinetic syndrome","Dysmenorrhea","Dyspepsia","Dysphonia","Dyspnea","Dyspnea on exertion","Dysthymic Disorder","Dystrophia unguium","Dysuria","Ear Inflammation","Ear discharge","Earache","Ecchymosis","Echolalia","Eczema","Edema","Elevated total bilirubin","Emaciation","Embolism","Emphysematous gangrene","Encephalopathies","Endocarditis","Endomyocardial Fibrosis","Enophthalmos","Enteropathic arthritis","Enthesopathy","Eosinophilia","Epilepsy","Episcleritis","Epistaxis","Erectile dysfunction","Ergotherapy","Eructation","Erythema","Erythema Nodosum","Erythrocytosis","Erythromelalgia","Esophageal Dysphagia","Esophagitis","Euphoric mood","Exanthema","Exanthema Subitum","Exertional headache","Exfoliative dermatitis","Exophthalmos","Eye pain","Facial edema","Fatigue","Fatty Liver","Faucial diphtheria","Feeling of lump in throat","Ferritin high","Fetal Growth Retardation","Fetor hepaticus","Fever","Fibrosis","Fissure in skin","Flank Pain","Flatfoot","Flatulence","Flatulence, eructation, and gas pain","Fluid overload","Fluorine","Flushing","Folic Acid Deficiency","Food Poisoning","Foreign body sensation","Formication","Fracture","Gait abnormality","Gastric ulcer","Gastrin increased","Gastritis","Gastrointestinal Hemorrhage","Gingival Hemorrhage","Gingivitis","Glomerulonephritis","Glossalgia","Glycogenolysis","Glycosuria","Goiter","Grimaces","Gynecomastia","HIV cardiomyopathy","Halitosis","Hallucinations","Headache","Hearing problem","Heart Failure, Right-Sided","Heart failure","Heart murmur","Heartburn","Heberden's node","Hemarthrosis","Hematemesis","Hematoma","Hematuria","Hemiparesis","Hemiplegia","Hemolysis (disorder)","Hemoptysis","Hemorrhage","Hemorrhagic Disorders","Hemosiderosis","Hemospermia","Hepatic congestion","Hepatitis","Hepatitis, Chronic","Hepatomegaly","Hepatomegaly, not elsewhere classified","Hepatosplenomegaly","Herpes zoster dermatitis","Hiccup","Hilar lymphadenopathy","Hirsutism","Hoarseness","Hot flushes","Hydrocephalus","Hydrops of gallbladder","Hypercalcemia","Hypercapnia","Hypercholesterolemia","Hypercholesterolemia result","Hyperemia","Hyperhidrosis disorder","Hyperkalemia","Hyperkeratosis","Hyperlipidemia","Hyperlipoproteinemias","Hypermetabolism","Hypernatremia","Hyperpigmentation","Hyperreflexia","Hypersplenism","Hypertensive disease","Hypertrichosis","Hypertriglyceridemia","Hyperuricemia","Hyperventilation","Hypesthesia","Hypocalcemia","Hypochlorhydria","Hypogammaglobulinemia","Hypoglycemia","Hypogonadism","Hypokalemia","Hyponatremia","Hypotension","Hypothermia, natural","Hypotrichosis","Hypoventilation","Hypoxia","Hypoxic arrest","Icterus","Ileus","Immunoglobulin Light Chains","Impaired glucose tolerance","Incontinence","Increased frequency of micturition","Increased susceptibility to infections","Infertility","Intercostal neuralgia","Intermittent fever","Intestinal Pseudo-Obstruction","Iridocyclitis","Iritis","Iron deficiency anemia","Irritable Mood","Irritative cough","Ischemia","Jaundice, Obstructive","Kandinsky Syndrome","Kaposi Varicelliform Eruption","Keratitis","Kidney Failure","Kidney Failure, Acute","Kyphosis deformity of spine","Lack of libido","Lactate dehydrogenase measurement","Laryngeal Edema","Laryngeal Nerve Palsy, Recurrent","Laryngitis","Lead line","Left Bundle-Branch Block","Left-Sided Heart Failure","Leg edema","Lethargy","Leukocytosis","Leukopenia","Leukoplakia","Linear atrophy","Lipid Metabolism Disorders","Lipiduria","Lipodermatosclerosis","Livedo Reticularis","Livedo vasculitis","Liver Cirrhosis","Liver Dysfunction","Liver enzymes abnormal","Long narrow head","Low Cardiac Output Syndrome","Lung Abscess","Lupus Nephritis","Lymphadenopathy","Lymphocytosis","Lymphomas NEC","Lymphopenia","Lytic lesion","Macrocytosis","Macular rash","Malabsorption","Malabsorption Syndrome","Malaise","Mariscae","Mastoiditis","Mean venous pressure increased","Measles","Meconium ileus","Megacolon","Megaesophagus","Melena","Meningeal Leukemia","Meningism","Meningitis","Meningoencephalitis","Menorrhagia","Mental Depression","Metabolic alkalosis","Metrorrhagia","Microangiopathic hemolytic anemia","Microscopic hematuria","Microstomia","Migraine Disorders","Mimetic Muscles","Miosis disorder","Mitral Valve Insufficiency","Mitral Valve Prolapse Syndrome","Mitral facies","Monoclonal Gammapathies","Monoclonal Gammopathy of Undetermined Significance","Monocytopenia","Motor retardation","Mouth Breathing","Mucous membrane dryness","Mucous membrane eruption","Multiple telangiectases","Muscle Cramp","Muscle Spasticity","Muscle Weakness","Muscular Atrophy","Mutism","Myalgia","Myasthenias","Mycoses"
,"Mydriasis","Myocardiac abscess","Myocardial Infarction","Myocardial fibrosis","Myocarditis","Myoglobinuria","Myopathy","Myopia","Myositis","Myxedema","Nasal obstruction present finding","Nasolabial sulcus","Nausea","Neck Pain","Neck stiffness","Necrotizing Enterocolitis","Nephritis","Nephrocalcinosis","Nephrolithiasis","Nephrotic Syndrome","Neutropenia","Night Blindness","Night sweats","Nocturia","Nocturnal cough","Normochromic anemia","Normocytic anemia","Nystagmus","Obesity, Abdominal","Obstruction","Oliguria","Ophthalmoplegia","Opisthotonus","Optic Atrophy","Optic Neuritis","Oral Ulcer","Orthopnea","Orthostatic dysregulation","Osteomyelitis","Osteoporosis","Other and unspecified skin changes","Other difficulties with micturition","Other fall on same level causing accidental injury","Other fecal abnormalities","Other hearing loss","Other peptic ulcers","Otitis Media","Otitis Media with Effusion","Pain","Pain neck/shoulder","Pain upon movement","Pallor","Palmar erythema","Palpitations","Pancarditis","Pancreatic Insufficiency","Pancytopenia","Papilledema","Paraesthesias and dysaesthesias","Paralysis and paresis (excl cranial nerve)","Paraphasia","Paraplegia","Paresis","Paresthesia","Parkinsonian Disorders","Parotitis","Paroxysmal atrial tachycardia","Pathological accumulation of air in tissues","Pathological fracture","Peptic Esophagitis","Perforation (observation)","Pericardial effusion","Pericarditis","Periodontitis","Peripheral Neuropathy","Peripheral cyanosis","Peritonitis","Peritonsillar Abscess","Personality change","Pertussis","Petechiae","Phakectomy","Pharyngitis","Phonophobia","Photophobia","Pityriasis alba","Plantar erythema","Pleural effusion disorder","Pleural fluid = exudate","Pleurisy","Pneumonia","Pneumonia, Interstitial","Pneumothorax","Poikilocytosis","Polyarthritis","Polychromatophilic stain reaction","Polydipsia","Polyglobulia","Polyhydramnios","Polymyositis","Polyneuritis","Polyneuropathy","Polyserositis","Polyuria","Portal vein thrombosis","Pregnancy","Premature Cardiac Complex","Premature ventricular contractions","Proctitis","Productive cough","Prolonged expiration","Prolonged menses","Proteinuria","Protrusio acetabuli","Pruritus","Pruritus Ani","Pseudofolliculitis","Pseudogout","Psoriasis","Psychiatric symptoms NEC","Psychotic Disorders","Ptosis","Pulmonary Edema","Pulmonary Emphysema","Pulmonary Fibrosis","Pulmonary Hypertension","Pulmonary aspiration","Pulmonary congestion","Pulmonary hemorrhage","Pulmonary microemboli","Pulse irregular","Pulsus paradoxus","Pupillary reflex test","Purpura","Pyoderma Gangrenosum","Raynaud Disease","Rectal Prolapse","Redness of eye","Regurgitation","Renal Colic","Renal Insufficiency","Renal infarction","Respiratory Insufficiency","Respiratory Tract Infections","Respiratory arrest","Restlessness","Reticulocytopenia","Reticulocytosis","Retinoids","Retrobulbar Neuritis","Retrognathia","Rhabdomyolysis","Rheology","Rhinitis","Rhonchi","Right bundle branch block","Right lower quadrant pain","Rotary Nystagmus","Sacroiliitis","Sclerodactyly","Scleroderma","Scoliosis, unspecified","Scotoma","Seborrheic dermatitis","Seborrheic dermatitis of scalp","Secondary hyperparathyroidism, not elsewhere classified","Seizures","Seizures, Focal","Sense Organs","Sepsis","Serositis","Shaking inside","Shock","Shock, Cardiogenic","Short-stepped gait","Sialorrhea","Sinus Tachycardia","Sinus bradycardia","Sinusitis","Skin hemorrhages","Skin sensation disturbance","Sleep Disorders","Sleeplessness","Slight temperature","Slow speech","Snoring","Sopor","Sore Throat","Sore to touch","Spasm glottis","Spastic gait","Speech Disorders","Speech and language abnormalities","Spider nevus","Splenomegaly","Splenomegaly, not elsewhere classified","Spontaneous abortion","Stahli's line","Stasis dermatitis","Status Asthmaticus","Steatorrhea","Stomach ache","Stomatitis","Strawberry tongue","Stridor","Structure of platysma muscle","Stupor","Subileus","Sudden Cardiac Death","Sweating","Swelling","Syncope","Syphilis","Tachycardia, Ventricular","Tachypnea","Temperature regulation disorder","Temporospatial disorientation","Tenosynovitis","Tetanus","Tetany","Thought broadcast","Thought insertion","Thought withdrawal","Thrombocytopenia","Thrombocytosis","Thrombophilia","Thrombophlebitis migrans","Thrombosis of renal vein","Tinea corporis (disorder)","Tinnitus","Tonsillitis","Tooth Extraction","Tracheobronchitis","Trachyonychia","Transient Ischemic Attack","Tremor","Tremulousness","Tricuspid Valve Insufficiency","Trigeminal Neuralgia","Ulcers NEC","Unconscious State","Unintentional weight loss","Urethritis","Urgency of micturition","Uric acid high","Urinary Bladder","Urinary Incontinence","Urinary Retention","Urticaria","Uterine Cervicitis","Uveitis","Uveitis, Posterior","Varicocele","Varicosity","Vascular constriction (function)","Vasculitis","Vasospasm","Ventricular Fibrillation","Ventricular arrhythmia","Vertigo","Vigilance decreased","Virilism","Visual disturbance","Vitamin B 12 Deficiency","Vitamin Deficiency","Vitamin K Deficiency","Vitreous floaters","Vomiting","Wasting Syndrome","Waxy flexibility","Weakness","Weight Gain","Wheezing","Wounds and Injuries","Courvoisier's gallbladder","Murphy's sign","Non Smoker","impaired cognition","abdominal tenderness","abnormal sensation","abnormally hard consistency","abortion","abscess bacterial","absences finding","achalasia","ache","adverse reaction","air fluid level","alcohol binge episode","alcoholic withdrawal symptoms","ambidexterity","anosmia","aphagia","apyrexial","asthenia","asymptomatic","atypia","awakening early","barking cough","bedridden","behavior hyperactive","behavior showing increased motor activity","blackout","blanch","bleeding of vagina","bowel sounds decreased","bradykinesia","breakthrough pain","breath sounds decreased","breath-holding spell","breech presentation","bruit","cardiovascular finding","catching breath","charleyhorse","chest discomfort","chest tightness","choke","cicatrisation","clammy skin","clonus","clumsiness","consciousness clear","coordination abnormal","cystic lesion","debilitation","decompensation","decreased body weight","decreased stool caliber","decreased translucency","difficulty","difficulty passing urine","disequilibrium","distended abdomen","distress respiratory","disturbed family","drool","dullness","dysesthesia","dyspareunia","egophony","elation","emphysematous change","energy increased","enuresis","estrogen use","excruciating pain","exhaustion","extrapyramidal sign","extreme exhaustion","facial paresis","fall","fatigability","fear of falling","fecaluria","feces in rectum","feeling hopeless","feeling strange","feeling suicidal","feels hot/feverish","flare","floppy","food intolerance","frail","fremitus","frothy sputum","furuncle","gag","gasping for breath","general discomfort","general unsteadiness","giddy mood","gravida 0","gravida 10","green sputum","groggy","guaiac positive","gurgle","hacking cough","hallucinations auditory","hallucinations visual","has religious belief","hearing impairment","heavy feeling","heavy legs","hematochezia","hematocrit decreased","heme positive","hemianopsia homonymous","hemodynamically stable","herzrasen","homelessness","homicidal thoughts","hunger","hydropneumothorax","hyperacusis","hyperemesis","hypersomnia","hypersomnolence","hypertonicity","hypoalbuminemia","hypokinesia","hypometabolism","hypoproteinemia","hypoxemia","immobile","impaired cognition.1","inappropriate affect","incoherent","intermenstrual heavy bleeding","intoxication","jugular venous distention","labored breathing","lameness","large-for-dates fetus","left\xa0atrial\xa0hypertrophy","left atrial hypertrophy","lesion","lightheadedness","lip smacking","loose associations","low back pain","lung nodule","macerated skin","macule","mass in breast","mass of body structure","mediastinal shift","mental status changes","metastatic lesion","milky","moan","monoclonal","monocytosis","mood depressed","moody","muscle hypotonia","muscle twitch","myoclonus","nasal discharge present","nasal flaring","nausea and vomiting","neologism","nervousness","nightmare","no known drug allergies","no status change","noisy respiration","nonsmoker","numbness","numbness of hand","orthostasis","out of breath","overweight","pain foot","pain in lower limb","painful swallowing","pansystolic murmur","para 1","para 2","paralyse","paraparesis","passed stones","patient non compliance","photopsia","pin-point pupils","pleuritic pain","pneumatouria","polymyalgia","poor dentition","poor feeding","posterior rhinorrhea","posturing","presence of q wave","pressure chest","previous pregnancies 2","primigravida","prodrome","projectile vomiting","prostate tender","prostatism","prostatitis","proteinemia","pseudomembranous colitis","pulse absent","pustule","qt interval prolonged","r wave feature","rale","rambling speech","rapid shallow breathing","red blotches","redness","regurgitates after swallowing","renal angle tenderness","rest pain","retch","retropulsion","rhd positive","rigor - temperature-associated observation","rolling of eyes","room spinning","satiety early","scar tissue","sciatica","scleral\xa0icterus","scleral icterus","scratch marks","sedentary","sensory discomfort","shooting pain","shortness of breath","side pain","sinus rhythm","sleepy","slowing of urinary stream","sneeze","sniffle","snuffle","spasm","speech slurred","spontaneous rupture of membranes","sputum purulent","st segment depression","st segment elevation","stiffness","stinging sensation","stool color yellow","stuffy nose","suicidal","superimposition","swelling of hands (finding)","symptom aggravating factors","systolic ejection murmur","systolic murmur","t wave inverted","tenesmus","terrify","thicken","throbbing sensation quality","titubation","todd paralysis","tonic seizures","transaminitis","transsexual","tremor resting","tumor cell invasion","unable to concentrate","uncoordination","underweight","unhappy","unresponsiveness","unsteady gait","unwell","urge incontinence","urinary hesitation","urinoma","verbal auditory hallucinations","verbally abusive behavior","vision blurred","weepiness","welt","wheelchair bound","withdraw","worry","yellow sputum"]
    res.render('diseases_pred',{sym,"username":myCache.get('username')});
})

router.post('/diseases_pred',async (req,res)=>{
    try{
        var { sym } = req.body;
        if(!Array.isArray(sym) && sym.length!=0){
            let cv = sym;
            sym = [cv];
        }else if(!Array.isArray(sym) && sym.length==0){
            res.redirect('/ml/diseases_pred');
        }

        const result = await axios("http://localhost:8000/disease_pred/",{
            method:"POST",
            data:{
                sym
            },
            headers: {
                'Content-Type': 'application/json',
            }
        })
        res.render("disease_pred_result",
        {
            "diseases":result.data.Diseases,
            "chances":result.data.Probabilities,
            "username":myCache.get('username')
        });
    }catch(err){
        res.send(err);
    }

})

router.get('/ml/:username/:msg',(req,res)=>{
    console.log(req.params.username,req.params.msg);
    res.send("Noted");
})

module.exports = router;
